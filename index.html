<!DOCTYPE html>
<style>
/* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
body {
  font-family: Arial, sans-serif;
  background-color: #f4f4f9;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

/* ëª¨ë‹¬ ë°°ê²½ (ì˜¤ë²„ë ˆì´) */
.modal {
  display: none; /* ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
  position: fixed;
  z-index: 1;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
}

/* ëª¨ë‹¬ ë‚´ìš© */
.modal-content {
  position: absolute;
  top: -100%; /* ì‹œì‘ ìœ„ì¹˜ (í™”ë©´ ìœ„ìª½) */
  left: 50%;
  transform: translateX(-50%);
  width: 90%; /* ëª¨ë°”ì¼ì— ì í•©í•œ ê¸°ë³¸ê°’ */
  max-width: 600px;
  /* min-height: 60vh; */
  background-color: white;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
  transition: top 0.5s ease; /* ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ */
}

/* ë‹«ê¸° ë²„íŠ¼ */
.close {
  color: #aaa;
  float: right;
  font-size: 1.5rem;
  font-weight: bold;
  cursor: pointer;
}

.close:hover,
.close:focus {
  color: black;
  text-decoration: none;
}

/* input ìŠ¤íƒ€ì¼ */
input[type="text"],
textarea {
  width: 95%;
  padding: 10px;
  margin-bottom: 15px;
  border: 1px solid #ddd;
  border-radius: 5px;
  font-size: 1.5rem; /* ê¸°ë³¸ í°íŠ¸ í¬ê¸° */
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

input[type="text"]:focus,
textarea:focus {
  border-color: #007BFF;
  box-shadow: 0 0 4px rgba(0, 123, 255, 0.5);
  outline: none;
}

textarea {
  min-height: 30vh;
  resize: none; /* í¬ê¸° ì¡°ì ˆ ê¸ˆì§€ */
}

/* button ìŠ¤íƒ€ì¼ */
button {
  width: 100%;
  padding: 12px 15px;
  margin-bottom: 2px;
  font-size: 1.5rem; /* ê¸°ë³¸ ë²„íŠ¼ í¬ê¸° */
  font-weight: bold;
  color: white;
  background-color: #007BFF;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 123, 255, 0.2);
  transition: background-color 0.3s ease, transform 0.2s ease;
}

button:hover {
  background-color: #0056b3;
  transform: translateY(-2px);
}

button:active {
  background-color: #004494;
  transform: translateY(0);
}

/* ë¯¸ë””ì–´ ì¿¼ë¦¬ (ë°˜ì‘í˜• ìŠ¤íƒ€ì¼ë§) */
@media (max-width: 768px) {
  .modal-content {
    width: 95%; /* ë” ì‘ì€ í™”ë©´ì—ì„œ ê°€ë¡œ í­ ì¡°ì • */
    padding: 15px; /* ì—¬ë°± ê°ì†Œ */
  }

  input[type="text"],
  textarea {
    font-size: 1.2rem; /* ì‘ì€ í™”ë©´ì—ì„œëŠ” í°íŠ¸ í¬ê¸° ì¶•ì†Œ */
  }

  button {
    font-size: 1.2rem; /* ë²„íŠ¼ í¬ê¸° ì¶•ì†Œ */
    padding: 10px 12px;
  }
}

@media (max-width: 480px) {
  .modal-content {
    width: 95%;
    padding: 10px; /* ì—¬ë°± ë” ê°ì†Œ */
  }

  input[type="text"],
  textarea {
    font-size: 1rem; /* ë” ì‘ì€ í°íŠ¸ í¬ê¸° */
  }

  button {
    font-size: 1rem; /* ë²„íŠ¼ë„ ì¶•ì†Œ */
    padding: 8px 10px;
  }
}

/* Footer ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: #333;
  color: #fff;
  text-align: center;
  padding: 10px 0;
  font-size: 1rem;
  /* z-index: 1000; */
}

/* ì‘ì€ í™”ë©´ì—ì„œ í°íŠ¸ í¬ê¸° ë° íŒ¨ë”© ì¡°ì • */
@media (max-width: 768px) {
  footer {
    font-size: 0.9rem;
    padding: 8px 0;
  }
}

/* ë§í¬ ìŠ¤íƒ€ì¼ */
footer a {
  color: #ffcc00; /* ë§í¬ ìƒ‰ìƒ */
  text-decoration: none;
}

footer a:hover {
  text-decoration: underline;
}
</style>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <meta property="og:type" content="website">
    <meta property="og:title" content="ìš°ì²´í†µì„ í´ë¦­í•´ ìƒˆí•´ ì¸ì‚¬ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”">
    <meta property="og:description" content="ìš°ì²´í†µì„ í´ë¦­í•´ ìƒˆí•´ ì¸ì‚¬ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”">
    <title>ìƒˆí•´ ìš°ì²´í†µ: í–‰ë³µí•œ í•œê°€ìœ„ ë˜ì„¸ìš”</title>
  </head>
  <body>
    <canvas id="canvas"></canvas>
  </body>
  <footer>
    <p>This work is based on <a href="https://sketchfab.com/3d-models/letter-1-2503769b8d694a3481c5167a2c977261" target="_blank">"letter (1)"</a> by <a href="https://sketchfab.com/tech.service.allwe" target="_blank">tech.service.allwe</a> licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY-4.0</a></p>
    <p>This work is based on <a href="https://sketchfab.com/3d-models/game-ready-animated-mailbox-postbox-582c0ce1ffee41179ab981146ae0ff87" target="_blank">"Game Ready Animated Mailbox / Postbox"</a> by <a href="https://sketchfab.com/OmegaRedZA" target="_blank">OmegaRedZA</a> licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY-4.0</a></p>
    <p>This work is based on <a href="https://sketchfab.com/3d-models/grass-vegitation-mix-81317d6bbe0244acad3de44046d077df" target="_blank">"Grass Vegitation Mix"</a> by <a href="https://sketchfab.com/Ujjwal-Chauhan" target="_blank">UJJWAL CHAUHAN</a> licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY-4.0</a></p>
  </footer>
</html>

<!-- ëª¨ë‹¬ ì°½ HTML ì½”ë“œ -->
<div id="contentModal" class="modal">
  <div class="modal-content" id="contentModelContent">
    <span id="closeContentModal" class="close">&times;</span>
    <h2 id="messageTitle">Title</h2>
    <p id="messageRecipient">Recipient</p>
    <p id="messageContent">content</p>
    <div>
      <button onclick="window.location.href = window.location.origin + window.location.pathname;">ë‚˜ë„ ìƒˆí•´ì¸ì‚¬ ë³´ë‚´ê¸°</button>
    </div>
  </div>
</div>

<!-- ëª¨ë‹¬ ì°½ HTML ì½”ë“œ -->
<div id="inputModal" class="modal">
  <div class="modal-content" id="inputModelContent">
    <span id="closeInputModal" class="close">&times;</span>
    <input type="text" placeholder="ì œëª©" id="inputTitle"/>
    <input type="text" placeholder="ìˆ˜ì‹ ì" id="inputTo"/>
    <textarea id="inputContent"></textarea>
    <div>
      <button id="shareBtn">ìƒˆí•´ì¸ì‚¬ ê³µìœ í•˜ê¸°</button>
      <button onclick="copy()">URL ë³µì‚¬í•˜ê¸°</button>
    </div>
  </div>
</div>

<script>
  share();
  
  const qwer = "pTCT{WAkHUU-P]Ov]`QBQSWS";
  const key = "2025HappyNewYear";
  function getShareUrl() {
      return new Promise((resolve, reject) => {
          let url = window.location.origin + window.location.pathname;

          if ($("#inputTitle").val() == "") {
              alert("ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");
              document.getElementById("inputTitle").focus();
              return reject("ì œëª© ì—†ìŒ");
          }

          if ($("#inputTo").val() == "") {
              alert("ìˆ˜ì‹ ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
              document.getElementById("inputTo").focus();
              return reject("ìˆ˜ì‹ ì ì—†ìŒ");
          }

          if ($("#inputContent").val() == "") {
              alert("ë‚´ìš©ì´ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤. ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");
              document.getElementById("inputContent").focus();
              return reject("ë‚´ìš© ì—†ìŒ");
          }

          const title = encodeURIComponent($("#inputTitle").val());
          const recipient = encodeURIComponent($("#inputTo").val());
          const content = encodeURIComponent($("#inputContent").val());
          url += `?title=${title}&recipient=${recipient}&content=${content}`;

          const redaeh = xorEncryptDecrypt(qwer, key);

          var settings = {
              "url": "https://api.lrl.kr/v6/short",
              "method": "POST",
              "timeout": 0,
              "headers": {
                  "x-api-key": redaeh,
                  "Content-Type": "application/json"
              },
              "data": JSON.stringify({ "url": url }),
          };

          $.ajax(settings)
              .done(function (response) {
                  resolve(response.result); // ğŸ”¹ ë¹„ë™ê¸° ìš”ì²­ ì™„ë£Œ í›„ ê²°ê³¼ ë°˜í™˜
              })
              .fail(function (error) {
                  console.error("Error:", error);
                  reject(error);
              });
      });
  }

  function copy(){
    getShareUrl()
      .then(shortUrl => {
      if(shortUrl){
        // í´ë¦½ë³´ë“œì— ë³µì‚¬
        navigator.clipboard.writeText(shortUrl)
          .then(() => {
            alert("URLì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
          })
          .catch((err) => {
            console.error("í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:", err);
            alert("URL ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
          });
      }
    }).catch(error => {
        console.error("ì—ëŸ¬ ë°œìƒ:", error);
    });
    }

    function share() {
      document.getElementById('shareBtn').addEventListener('click', async () => {
          try {
              const shortUrl = await getShareUrl(); // ğŸ”¹ URLì„ ë¨¼ì € ê°€ì ¸ì˜¤ê¸°

              if (!shortUrl) {
                  alert("URL ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                  return;
              }

              if (navigator.share) {
                  try {
                      await navigator.share({
                          title: 'í¸ì§€ ê³µìœ í•˜ê¸°',
                          url: shortUrl  // ğŸ”¹ ì—¬ê¸°ì„œ shortUrl ì‚¬ìš© (getShareUrl() ì¬í˜¸ì¶œ X)
                      });
                      console.log('ê³µìœ  ì„±ê³µ!');
                  } catch (err) {
                      console.error('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', err);
                  }
              } else {
                  alert('ì´ ë¸Œë¼ìš°ì €ëŠ” ê³µìœ  APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\nURLì„ ë³µì‚¬í•´ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
              }
          } catch (error) {
              console.error("ì—ëŸ¬ ë°œìƒ:", error);
          }
      });
  }

function xorEncryptDecrypt(text, key) {
      let result = "";
      for (let i = 0; i < text.length; i++) {
          result += String.fromCharCode(text.charCodeAt(i) ^ key.charCodeAt(i % key.length));
      }
      return result;
  }
</script>

<script type="importmap">
      {
  	"imports": {
      "three": "https://unpkg.com/three@0.138.3/build/three.module.js",
      "GLTFLoader": "https://unpkg.com/three@0.141.0/examples/jsm/loaders/GLTFLoader.js",
      "FontLoader": "https://unpkg.com/three@0.141.0/examples/jsm/loaders/FontLoader.js",
      "OrbitControls": "https://unpkg.com/three@0.141.0/examples/jsm/controls/OrbitControls.js",
      "TextGeometry": "https://unpkg.com/three@0.152.0/examples/jsm/geometries/TextGeometry.js"
    }
  }
</script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<script type="module" src="./main.js"></script>
